package fr.bl4.blib.utils;

import net.kyori.adventure.text.Component;
import net.kyori.adventure.text.format.TextDecoration;
import net.kyori.adventure.text.minimessage.MiniMessage;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class ColorUtils {
	public static Component colorize(String msg) {
		if (msg == null) return Component.text("Erreur");

		Pattern pattern = Pattern.compile("[&ยง]([0-9a-fA-FkmolnrKMOLNR])");
		Matcher matcher = pattern.matcher(msg);

		StringBuilder result = new StringBuilder();
		while (matcher.find()) {
			String colorCode = matcher.group(1);
			String replacement = getColorReplacement(colorCode);
			matcher.appendReplacement(result, replacement);
		}
		matcher.appendTail(result);

		return MiniMessage.miniMessage().deserialize(result.toString()).decoration(TextDecoration.ITALIC, false);
	}

	private static String getColorReplacement(String colorCode) {
		return switch (colorCode.toLowerCase()) {
			case "0" -> "<black>";
			case "1" -> "<dark_blue>";
			case "2" -> "<dark_green>";
			case "3" -> "<dark_aqua>";
			case "4" -> "<dark_red>";
			case "5" -> "<dark_purple>";
			case "6" -> "<gold>";
			case "7" -> "<gray>";
			case "8" -> "<dark_gray>";
			case "9" -> "<blue>";
			case "a" -> "<green>";
			case "b" -> "<aqua>";
			case "c" -> "<red>";
			case "d" -> "<light_purple>";
			case "e" -> "<yellow>";
			case "f" -> "<white>";
			case "r" -> "<reset>";
			case "l" -> "<bold>";
			case "n" -> "<underlined>";
			case "m" -> "<strikethrough>";
			case "o" -> "<italic>";
			case "k" -> "<obfuscated>";
			default -> "";
		};
	}





}
